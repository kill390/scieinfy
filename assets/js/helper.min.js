const monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],firebaseConfig={apiKey:"AIzaSyDAFkCcqmYBeFtDIZx7c8Jb9NaUaKJpBLQ",authDomain:"scieinfy.firebaseapp.com",projectId:"scieinfy",storageBucket:"scieinfy.appspot.com",messagingSenderId:"921340608972",appId:"1:921340608972:web:084109f401e27d0bf99d69"},app=firebase.initializeApp(firebaseConfig),db=firebase.firestore();let offline=!1;async function offlineMode(){try{await firebase.firestore().enablePersistence(),enablePersistence()}catch(e){options={},offline=!1,console.log(e),enablePersistence()}}function enablePersistence(){"true"===getCookie("fitched")&&limit<=lastLimit&&offline?(options={source:"cache"},console.log("Fitched")):console.log("failed to fitch cache"),getDate()}function getDate(){console.log("Getting data"),query.get(options).then((e=>{console.log("Succesfully get data"),e.size<limit&&"undefined"!=typeof moreLink&&(moreLink.style.display="none"),progress.value=1,setTimeout((()=>{progress.style.display="none"}),1500),e.forEach((e=>{queryThings(e),console.log(e)}))})).catch((e=>{progress.value=1,progress.style.setProperty("--_progress","var(--bs-danger)"),console.log("Error getting documents: ",e)}))}function queryThings(e){let t=e.data(),i=new Date(t.date.toDate()),n=i.getDate()+" "+monthNames[i.getMonth()]+" "+i.getFullYear();t.title&&t.summary&&t.imgLink&&t.url&&createArticaleCard(t.title,t.summary,t.imgLink,t.url,n),document.cookie="fitched=true; max-age=3600",document.cookie=`lastLimit=${lastLimit>=limit?lastLimit:limit}; max-age=3600`}function createArticaleCard(e,t,i,n,o){if(""===e||""===t||""===i||""===n)return;const a=document.getElementById("newest-list-group");let r=document.createElement("li");r.classList.add("list-group-item");let s=document.createElement("img");s.classList.add("item-img"),s.setAttribute("src",i),r.appendChild(s);let l=document.createElement("div");l.classList.add("item-content");let c=document.createElement("span");c.classList.add("date"),c.innerHTML=o,l.appendChild(c);let d=document.createElement("h2");d.innerHTML=e,l.appendChild(d);let m=document.createElement("p");m.innerHTML=t,l.appendChild(m),r.appendChild(l),a.appendChild(r),r.addEventListener("click",(()=>{window.location.href=n}))}function getCookie(e){let t=e+"=",i=decodeURIComponent(document.cookie).split(";");for(let e=0;e<i.length;e++){let n=i[e];for(;" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}function ios(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}ios()||(offline=!0,offlineMode());